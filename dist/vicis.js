!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("es-aggregate-error")):"function"==typeof define&&define.amd?define(["exports","es-aggregate-error"],t):t((e=e||self).vicis={},e.AggregateError)}(this,(function(e,t){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;const r=["boolean","flag","numeric","integer","string","json"];function _classPrivateFieldGet(e,t){var r=t.get(e);if(!r)throw new TypeError("attempted to get private field on non-instance");return r.get?r.get.call(e):r.value}function _classPrivateFieldSet(e,t,r){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,r);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=r}return r}function arrayBasicIntersect(e,t){if(!e.length||!t.length)return[];const r=new Set(t);return[...new Set(e)].filter(e=>r.has(e))}function arrayGetDifference(e,t){const r=new Set(t);return e.filter(e=>!r.has(e))}function arrayHasSame(e,t){if(!e.length||!t.length)return!1;const r=new Set(t);return Boolean([...new Set(e)].filter(e=>r.has(e)).length)}function checkIsObjectLike(e){return e&&"object"==typeof e&&!Array.isArray(e)}function isFunction(e){return"[object Function]"===Object.prototype.toString.call(e)&&!/^class\s/.test(Function.prototype.toString.call(e))}function objectGetKeys(e){return Object.keys(e).sort((e,t)=>e.localeCompare(t))}function objectGetProperty(e,t,r){return t in e?e[t]:r}const i=["cast","defaults","defined","exclude","omit","order","pick","sort","rename","replace","required","transform"];function isString(e){return"string"==typeof e}function objectIsEmpty(e){return 0===Object.keys(e).length}function jsonStringify(e){return JSON.stringify(e)}function castConfig(e){if(!checkIsObjectLike(e))throw new TypeError("Cast should be an object");return objectIsEmpty(e)?{}:(Object.keys(e).forEach(t=>{if(!isString(e[t]))throw new TypeError(`'Cast' expect object values to be strings. Not a string at key: '${jsonStringify(e[t])}'.`);if(!r.includes(e[t]))throw new TypeError(`'Cast' has unknown type in {${t}: "${e[t]}"}.`)}),e)}function castToString(e){if(null==e)return"";if("string"==typeof e)return e;const t=e.toString();return"0"===t&&Object.is(e,-0)?"-0":t}const a="boolean",s="flag",n="numeric",o="integer",c="string",l="json";function jsonParse(e){return JSON.parse(e)}function objectToPlain(e){return function objectDeserialize(e){return isString(e)?jsonParse(e):e}(function objectSerialize(e){let t;const{toJSON:r,toObject:i}=e;return t=isFunction(i)?e.toObject():isFunction(r)?e.toJSON():e,isString(t)?t:jsonStringify(t)}(e))}function castData(e,t){return objectIsEmpty(e)||Object.keys(e).forEach(r=>{const i=e[r];if(!(r in t))throw new Error(`Field '${r}' suppose to be converted to ${i}.`);switch(i){case a:t[r]=Boolean(t[r]);break;case s:t[r]=function convertToFlag(e,t=!1,r=!1){if(null==e)return t;if("boolean"==typeof e)return e;const i=e.toString().toLocaleLowerCase().trim();return 0===i.length?t:"true"===i||"1"===i||"false"!==i&&"0"!==i&&r}(t[r]);break;case n:{const e=Number(t[r]);if(Number.isFinite(e))t[r]=e;else{const e=Number.parseFloat(castToString(t[r]).trim());Number.isFinite(e)?t[r]=e:t[r]=0}break}case o:{const e=Number(t[r]);if(Number.isFinite(e))t[r]=Math.trunc(e);else{const i=Number.parseFloat(castToString(t[r]).trim());Number.isFinite(i)?t[r]=Math.trunc(e):t[r]=0}break}case c:t[r]=castToString(t[r]);break;case l:t[r]=objectToPlain(t[r]);break;default:throw new Error("Unknown value convert error")}}),t}function castToJson(e,t=!1){return t?function objectKeysSort(e,t=!0){if(!e||"object"!=typeof e||Array.isArray(e))return e;const r=Object.keys(e);return r.length?r.reduce((r,i)=>(t&&e[i]&&"object"==typeof e[i]&&!Array.isArray(e[i])?r[i]=objectKeysSort(e[i],t):r[i]=e[i],r),Object.create(Object.getPrototypeOf(e))):e}(jsonParse(jsonStringify(e)),!0):jsonParse(jsonStringify(e))}function clone(e){switch(typeOf(e)){case"array":return e.slice();case"object":return Object.assign({},e);case"date":return new e.constructor(Number(e));case"map":return new Map(e);case"set":return new Set(e);case"buffer":return function cloneBuffer(e){const t=e.length;let r;r=Buffer.allocUnsafe?Buffer.allocUnsafe(t):Buffer.from(t);return e.copy(r),r}(e);case"symbol":return function cloneSymbol(e){if(Symbol.prototype.valueOf)return Object(Symbol.prototype.valueOf.call(e));return{}}(e);case"arraybuffer":return function cloneArrayBuffer(e){const t=new e.constructor(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t}(e);case"float32array":case"float64array":case"int16array":case"int32array":case"int8array":case"uint16array":case"uint32array":case"uint8clampedarray":case"uint8array":return function cloneTypedArray(e){return new e.constructor(e.buffer,e.byteOffset,e.length)}(e);case"regexp":return function cloneRegExp(e){let t;t=void 0!==e.flags?e.flags:/\w+$/.exec(e)||void 0;const r=new e.constructor(e.source,t);return r.lastIndex=e.lastIndex,r}(e);case"error":return Object.create(e);default:return e}}function typeOf(e){if(void 0===e)return"undefined";if(null===e)return"null";if(!0===e||!1===e||e instanceof Boolean)return"boolean";if("string"==typeof e||e instanceof String)return"string";if("number"==typeof e||e instanceof Number)return"number";if("function"==typeof e||e instanceof Function)return"function";if(void 0!==Array.isArray&&Array.isArray(e))return"array";if(e instanceof RegExp)return"regexp";if(e instanceof Date)return"date";const t=toString.call(e);return"[object RegExp]"===t?"regexp":"[object Date]"===t?"date":"[object Arguments]"===t?"arguments":"[object Error]"===t?"error":function isBuffer(e){return null!==e&&Boolean(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}(e)?"buffer":"[object Set]"===t?"set":"[object WeakSet]"===t?"weakset":"[object Map]"===t?"map":"[object WeakMap]"===t?"weakmap":"[object Symbol]"===t?"symbol":"[object Int8Array]"===t?"int8array":"[object Uint8Array]"===t?"uint8array":"[object Uint8ClampedArray]"===t?"uint8clampedarray":"[object Int16Array]"===t?"int16array":"[object Uint16Array]"===t?"uint16array":"[object Int32Array]"===t?"int32array":"[object Uint32Array]"===t?"uint32array":"[object Float32Array]"===t?"float32array":"[object Float64Array]"===t?"float64array":"object"}function isObjectObject(e){return!0===function isObject(e){return"object"==typeof e&&null!==e}(e)&&"[object Object]"===Object.prototype.toString.call(e)}function cloneDeep(e,t){switch(typeOf(e)){case"object":return function cloneObjectDeep(e,t){if("function"==typeof t)return t(e);if(t||function isPlainObject(e){let t,r;return!1!==isObjectObject(e)&&(t=e.constructor,"function"==typeof t&&(r=t.prototype,!1!==isObjectObject(r)&&!1!==r.hasOwnProperty("isPrototypeOf")))}(e)){const r=new e.constructor;for(let i in e)r[i]=cloneDeep(e[i],t);return r}return e}(e,t);case"array":return function cloneArrayDeep(e,t){const r=new e.constructor(e.length);for(let i=0;i<e.length;i++)r[i]=cloneDeep(e[i],t);return r}(e,t);default:return clone(e)}}function clone$1(e){return function checkIsPrimitive(e){return Object(e)!==e}(e)?e:cloneDeep(e)}function defaultsConfig(e){if(!checkIsObjectLike(e))throw new TypeError("'Defaults' should be an object");return e}function defaultsData(e,t){return objectIsEmpty(e)||Object.keys(e).forEach(r=>{r in t&&void 0!==t[r]||(t[r]=e[r])}),t}function arrayGetUnique(e,t=!0){if(e.length<2)return e;let r=[...new Set(e)];if(r.includes(0)){const t=e.filter(e=>0===e);t.length>1&&t.some(e=>1/e===Number.NEGATIVE_INFINITY)&&r.push(-0)}if(r.filter(e=>"string"==typeof e).length){const t=e.filter(e=>"string"==typeof e);if(t.length>1){const e=[...new Set(t.map(e=>e.normalize()))];e.forEach(e=>{delete r[r.indexOf(e)]});const i=[];for(let e=0;e<r.length;e++)e in r&&i.push(r[e]);r=i.concat(e)}}return t?r.sort():r}function arrayIsEmpty(e){return 0===e.length}function definedConfig(e){if(!Array.isArray(e))throw new TypeError("'Defined' should be an array");return arrayIsEmpty(e)?[]:arrayGetUnique(e).map(e=>{if(!isString(e))throw new TypeError(`'Defined' expect array of strings. Value: '${jsonStringify(e)}'.`);return e})}function definedData(e,t){const r=definedConfig(e);return arrayIsEmpty(r)||r.forEach(e=>{if(!(e in t))throw new Error(`Field '${e}' must be defined.`);if(void 0===t[e])throw new Error(`Field '${e}' should have value.`)}),t}function isRegExp(e){return e instanceof RegExp}function excludeConfig(e){if(!Array.isArray(e))throw new TypeError("'Exclude' should be an array");return arrayIsEmpty(e)?[]:arrayGetUnique(e).map(e=>{if(!isString(e)&&!isRegExp(e))throw new TypeError(`'Exclude' expect array of strings or regular expressions. Value: '${jsonStringify(e)}'.`);return e})}function omitConfig(e){if(!Array.isArray(e))throw new TypeError("'Omit' should be an array");return arrayIsEmpty(e)?[]:arrayGetUnique(e).map(e=>{if(!isString(e))throw new TypeError(`'Omit' expect array of strings. Value: '${jsonStringify(e)}'.`);return e})}function orderConfig(e){if(!Array.isArray(e))throw new TypeError("'Order' should be an array");return arrayIsEmpty(e)?[]:arrayGetUnique(e,!1).map(e=>{if(!isString(e))throw new TypeError(`'Order' expect array of strings. Value: '${jsonStringify(e)}'.`);return e})}function objectKeysOrder(e,t=[],r=!1){if(!Array.isArray(t)||0===t.length)return e;const i=t.filter(e=>"string"==typeof e);let a=new Set(Object.keys(e));const s={};return i.forEach(t=>{a.delete(t),t in e&&(s[t]=e[t])}),a=[...a],r&&(a=a.sort((e,t)=>e.localeCompare(t))),a.forEach(t=>s[t]=e[t]),s}function pickConfig(e){if(!Array.isArray(e))throw new TypeError("'Pick' should be an array");return arrayIsEmpty(e)?[]:arrayGetUnique(e).map(e=>{if(!isString(e))throw new TypeError(`'Pick' expect array of strings. Value: '${jsonStringify(e)}'.`);return e})}function pickData(e,t){if(arrayIsEmpty(e))return t;const r={};return Object.keys(t).forEach(i=>{e.includes(i)&&(r[i]=t[i])}),r}function renameConfig(e){if(!checkIsObjectLike(e))throw new TypeError("'Rename' should be an object");if(objectIsEmpty(e))return{};Object.keys(e).forEach(e=>{if(!isString(e))throw new TypeError(`'Rename' expect object values to be strings. Not a string at key: '${e}'.`)});const t=Object.values(e),r=arrayGetUnique(t);if(t.length!==r.length)throw new TypeError(`'Rename' has similar values: '${jsonStringify(r)}'.`);return e}function renameData(e,t){if(objectIsEmpty(e))return t;const r=Object.keys(e).sort((e,t)=>e.localeCompare(t)),i={};return r.forEach(r=>{if(!(r in t))throw new Error(`Field '${r}' suppose to be renamed.`);i[e[r]]=t[r]}),r.forEach(e=>{delete t[e]}),Object.assign(t,i),t}function replaceConfig(e){if(!checkIsObjectLike(e))throw new TypeError("'Replace' should be an object");return e}function replaceData(e,t){return objectIsEmpty(e)||Object.keys(e).forEach(r=>{t[r]=e[r]}),t}function requiredConfig(e){if(!Array.isArray(e))throw new TypeError("'Required' should be an array");return arrayIsEmpty(e)?[]:arrayGetUnique(e).map(e=>{if(!isString(e))throw new TypeError(`'Required' expect array of strings. Value: '${jsonStringify(e)}'.`);return e})}function requiredData(e,t){return arrayIsEmpty(e)||e.forEach(e=>{if(!(e in t))throw new Error(`Field '${e}' is required.`)}),t}function transformConfig(e){if(!checkIsObjectLike(e))throw new TypeError("'Transform' should be an object");return objectIsEmpty(e)?{}:(Object.keys(e).forEach(t=>{if(!function checkIsCallable(e){return!!e&&(!!isFunction(e)||!!("toFunction"in e&&isFunction(e.toFunction)&&isFunction(e.toFunction())))}(e[t]))throw new TypeError(`'Transform' expect object values to be functions. Not a function at key: '${t}'.`)}),e)}function transformData(e,t){return objectIsEmpty(e)||Object.keys(e).forEach(r=>{if(!(r in t))throw new Error(`Field '${r}' suppose to be transformed.`);isFunction(e[r])?t[r]=e[r](t[r],r,clone$1(t)):t[r]=e[r].toFunction()(t[r],r,clone$1(t))}),t}class VicisParameter{constructor(){u.set(this,{writable:!0,value:void 0}),f.set(this,{writable:!0,value:void 0}),h.set(this,{writable:!0,value:void 0}),d.set(this,{writable:!0,value:!1}),y.set(this,{writable:!0,value:!1}),p.set(this,{writable:!0,value:void 0}),m.set(this,{writable:!0,value:void 0}),v.set(this,{writable:!0,value:void 0})}get boolean(){return _classPrivateFieldSet(this,u,a),this}get flag(){return _classPrivateFieldSet(this,u,s),this}get integer(){return _classPrivateFieldSet(this,u,o),this}get numeric(){return _classPrivateFieldSet(this,u,n),this}get string(){return _classPrivateFieldSet(this,u,c),this}get json(){return _classPrivateFieldSet(this,u,l),this}get defined(){return _classPrivateFieldSet(this,h,!0),this}get required(){return _classPrivateFieldSet(this,p,!0),this}replace(e){return _classPrivateFieldSet(this,v,e),_classPrivateFieldSet(this,y,!0),this}default(e){return _classPrivateFieldSet(this,f,e),_classPrivateFieldSet(this,d,!0),this}transform(e){return _classPrivateFieldSet(this,m,e),this}toObject(){return{cast:_classPrivateFieldGet(this,u),defaults:_classPrivateFieldGet(this,f),defined:_classPrivateFieldGet(this,h),hasDefaults:_classPrivateFieldGet(this,d),hasValue:_classPrivateFieldGet(this,y),required:_classPrivateFieldGet(this,p),transform:_classPrivateFieldGet(this,m),value:_classPrivateFieldGet(this,v)}}}var u=new WeakMap,f=new WeakMap,h=new WeakMap,d=new WeakMap,y=new WeakMap,p=new WeakMap,m=new WeakMap,v=new WeakMap;function convertFunctionToConfig(e){if(!isFunction(e))throw new TypeError("Callable must be a function");const t=e(new Proxy(new Object(null),{get:function(e,t){return t in e||(e[t]=new VicisParameter),e[t]}})),r={cast:{},defaults:{},defined:[],pick:[],required:[],replace:{},transform:{}};return Object.keys(t).forEach(e=>{r.pick.push(e);const i={};if(t[e]instanceof VicisParameter)i[e]=t[e].toObject();else{const r=new VicisParameter;r.replace(t[e]),i[e]=r.toObject()}delete t[e],i[e].cast&&(r.cast[e]=i[e].cast),i[e].defined&&r.defined.push(e),i[e].required&&r.required.push(e),i[e].transform&&(r.transform[e]=i[e].transform),i[e].hasDefaults&&(r.defaults[e]=i[e].defaults),i[e].hasValue&&(r.replace[e]=i[e].value)}),Object.keys(r.cast).length||delete r.cast,Object.keys(r.defaults).length||delete r.defaults,r.defined.length||delete r.defined,r.pick.length||delete r.pick,r.required.length||delete r.required,Object.keys(r.replace).length||delete r.replace,Object.keys(r.transform).length||delete r.transform,r}t.shim();class ValidationError extends Error{constructor(e){super(e),this.name="ValidationError"}}class Vicis{constructor(e={},t){b.set(this,{writable:!0,value:{}}),g.set(this,{writable:!0,value:[]}),F.set(this,{writable:!0,value:[]}),w.set(this,{writable:!0,value:[]}),P.set(this,{writable:!0,value:[]}),j.set(this,{writable:!0,value:[]}),_.set(this,{writable:!0,value:[]}),S.set(this,{writable:!0,value:!1}),E.set(this,{writable:!0,value:{}}),G.set(this,{writable:!0,value:{}}),k.set(this,{writable:!0,value:[]}),O.set(this,{writable:!0,value:{}}),I.set(this,{writable:!0,value:{}}),C.set(this,{writable:!0,value:void 0}),T.set(this,{writable:!0,value:void 0}),D.set(this,{writable:!0,value:void 0}),_classPrivateFieldSet(this,T,function validateConfig(){const e=objectGetKeys(_classPrivateFieldGet(this,b)),t=objectGetKeys(_classPrivateFieldGet(this,E)),r=objectGetKeys(_classPrivateFieldGet(this,G)),i=objectGetKeys(_classPrivateFieldGet(this,O));if(arrayHasSame(_classPrivateFieldGet(this,P),e))throw new ValidationError(`'omit' has same keys as 'cast': ${arrayBasicIntersect(_classPrivateFieldGet(this,P),e)}.`);if(arrayHasSame(_classPrivateFieldGet(this,P),_classPrivateFieldGet(this,F)))throw new ValidationError(`'omit' has same keys as 'defined': ${arrayBasicIntersect(_classPrivateFieldGet(this,P),_classPrivateFieldGet(this,F))}.`);if(arrayHasSame(_classPrivateFieldGet(this,P),_classPrivateFieldGet(this,_)))throw new ValidationError(`'omit' has same keys as 'pick': ${arrayBasicIntersect(_classPrivateFieldGet(this,P),_classPrivateFieldGet(this,_))}.`);if(arrayHasSame(_classPrivateFieldGet(this,P),t))throw new ValidationError(`'omit' has same keys as 'rename': ${arrayBasicIntersect(_classPrivateFieldGet(this,P),t)}.`);if(arrayHasSame(_classPrivateFieldGet(this,P),r))throw new ValidationError(`'omit' has same keys as 'replace': ${arrayBasicIntersect(_classPrivateFieldGet(this,P),r)}.`);if(arrayHasSame(_classPrivateFieldGet(this,P),_classPrivateFieldGet(this,k)))throw new ValidationError(`'omit' has same keys as 'required': ${arrayBasicIntersect(_classPrivateFieldGet(this,P),_classPrivateFieldGet(this,k))}.`);if(arrayHasSame(_classPrivateFieldGet(this,P),i))throw new ValidationError(`'omit' has same keys as 'transform': ${arrayBasicIntersect(_classPrivateFieldGet(this,P),i)}.`);if(arrayHasSame(e,r))throw new ValidationError(`'cast' has same keys as 'replace': ${arrayBasicIntersect(e,r)}.`);if(arrayHasSame(e,i))throw new ValidationError(`'cast' has same keys as 'transform': ${arrayBasicIntersect(e,i)}.`);if(arrayHasSame(r,i))throw new ValidationError(`'replace' has same keys as 'transform': ${arrayBasicIntersect(r,i)}.`);return this}.bind(this)),_classPrivateFieldSet(this,D,function validateData(){return void 0===_classPrivateFieldGet(this,C)||("toObject"in _classPrivateFieldGet(this,C)&&isFunction(_classPrivateFieldGet(this,C).toObject)?_classPrivateFieldSet(this,I,_classPrivateFieldGet(this,C).toObject()):"toJSON"in _classPrivateFieldGet(this,C)&&isFunction(_classPrivateFieldGet(this,C).toJSON)?_classPrivateFieldSet(this,I,_classPrivateFieldGet(this,C).toJSON()):_classPrivateFieldSet(this,I,_classPrivateFieldGet(this,C)),_classPrivateFieldSet(this,I,function omitData(e,t){if(arrayIsEmpty(e))return t;const r={};return Object.keys(t).forEach(i=>{e.includes(i)||(r[i]=t[i])}),r}(_classPrivateFieldGet(this,P),_classPrivateFieldGet(this,I))),_classPrivateFieldSet(this,I,requiredData(_classPrivateFieldGet(this,k),_classPrivateFieldGet(this,I))),_classPrivateFieldSet(this,I,definedData(_classPrivateFieldGet(this,F),_classPrivateFieldGet(this,I))),_classPrivateFieldSet(this,I,castData(_classPrivateFieldGet(this,b),_classPrivateFieldGet(this,I))),_classPrivateFieldSet(this,I,transformData(_classPrivateFieldGet(this,O),_classPrivateFieldGet(this,I))),_classPrivateFieldSet(this,I,replaceData(_classPrivateFieldGet(this,G),_classPrivateFieldGet(this,I))),_classPrivateFieldSet(this,I,renameData(_classPrivateFieldGet(this,E),_classPrivateFieldGet(this,I))),_classPrivateFieldSet(this,I,defaultsData(_classPrivateFieldGet(this,g),_classPrivateFieldGet(this,I))),_classPrivateFieldSet(this,I,pickData(_classPrivateFieldGet(this,_),_classPrivateFieldGet(this,I))),_classPrivateFieldSet(this,I,function excludeData(e,t){if(arrayIsEmpty(e))return t;const r=e.filter(isString);if(r.length&&Object.keys(t).forEach(e=>{r.includes(e)&&delete t[e]}),0===objectGetKeys(t).length)return t;const i=e.filter(isRegExp);return i.length&&i.forEach(e=>{Object.keys(t).forEach(r=>{e.test(r)&&delete t[r]})}),t}(_classPrivateFieldGet(this,w),_classPrivateFieldGet(this,I))),_classPrivateFieldSet(this,I,castToJson(_classPrivateFieldGet(this,I),_classPrivateFieldGet(this,S))),_classPrivateFieldSet(this,I,function orderData(e,t,r=!1){return arrayIsEmpty(e)?t:objectKeysOrder(t,e,r)}(_classPrivateFieldGet(this,j),_classPrivateFieldGet(this,I),_classPrivateFieldGet(this,S)))),this}.bind(this)),this.config(e),void 0!==t&&this.data(t)}static factory(e={},t){return new Vicis(e,t)}static from(e,t={}){return Vicis.factory(t,e).getData()}static fromArray(e,t={}){const r=Vicis.factory(t);return Array.from(e).map(e=>r.data(e).getData())}static get BOOLEAN(){return"boolean"}static get FLAG(){return"flag"}static get NUMERIC(){return"numeric"}static get INTEGER(){return"integer"}static get STRING(){return"string"}static get JSON(){return"json"}getConfig(){return clone$1({cast:_classPrivateFieldGet(this,b),defaults:_classPrivateFieldGet(this,g),defined:_classPrivateFieldGet(this,F),exclude:_classPrivateFieldGet(this,w),omit:_classPrivateFieldGet(this,P),order:_classPrivateFieldGet(this,j),pick:_classPrivateFieldGet(this,_),sort:_classPrivateFieldGet(this,S),rename:_classPrivateFieldGet(this,E),replace:_classPrivateFieldGet(this,G),required:_classPrivateFieldGet(this,k),transform:_classPrivateFieldGet(this,O)})}resetConfig(){return _classPrivateFieldSet(this,b,{}),_classPrivateFieldSet(this,g,{}),_classPrivateFieldSet(this,F,[]),_classPrivateFieldSet(this,w,[]),_classPrivateFieldSet(this,P,[]),_classPrivateFieldSet(this,j,[]),_classPrivateFieldSet(this,_,[]),_classPrivateFieldSet(this,S,!1),_classPrivateFieldSet(this,E,{}),_classPrivateFieldSet(this,G,{}),_classPrivateFieldSet(this,k,[]),_classPrivateFieldSet(this,O,{}),this}static testConfig(e={}){if(isFunction(e)&&(e=convertFunctionToConfig(e)),!checkIsObjectLike(e))throw new t([new TypeError("Config should be an object")],"Configuration has errors");const r=arrayGetDifference(objectGetKeys(e),i);if(r.length)throw new t([new TypeError(`Config has unknown fields: '${r.join("', '")}'.`)],"Configuration has errors");const a=objectGetKeys(objectGetProperty(e,"cast",{})),s=objectGetKeys(objectGetProperty(e,"rename",{})),n=objectGetKeys(objectGetProperty(e,"replace",{})),o=objectGetKeys(objectGetProperty(e,"transform",{})),c=[];if("omit"in e&&arrayHasSame(e.omit,a)&&c.push(new ValidationError(`'omit' has same keys as 'cast': ${arrayBasicIntersect(e.omit,a)}.`)),"omit"in e&&"defined"in e&&arrayHasSame(e.omit,e.defined)&&c.push(new ValidationError(`'omit' has same keys as 'defined': ${arrayBasicIntersect(e.omit,e.defined)}.`)),"omit"in e&&"pick"in e&&arrayHasSame(e.omit,e.pick)&&c.push(new ValidationError(`'omit' has same keys as 'pick': ${arrayBasicIntersect(e.omit,e.pick)}.`)),"omit"in e&&arrayHasSame(e.omit,s)&&c.push(new ValidationError(`'omit' has same keys as 'rename': ${arrayBasicIntersect(e.omit,s)}.`)),"omit"in e&&arrayHasSame(e.omit,n)&&c.push(new ValidationError(`'omit' has same keys as 'replace': ${arrayBasicIntersect(e.omit,n)}.`)),"omit"in e&&"required"in e&&arrayHasSame(e.omit,e.required)&&c.push(new ValidationError(`'omit' has same keys as 'required': ${arrayBasicIntersect(e.omit,e.required)}.`)),"omit"in e&&arrayHasSame(e.omit,o)&&c.push(new ValidationError(`'omit' has same keys as 'transform': ${arrayBasicIntersect(e.omit,o)}.`)),arrayHasSame(a,n)&&c.push(new ValidationError(`'cast' has same keys as 'replace': ${arrayBasicIntersect(a,n)}.`)),arrayHasSame(a,o)&&c.push(new ValidationError(`'cast' has same keys as 'transform': ${arrayBasicIntersect(a,o)}.`)),arrayHasSame(n,o)&&c.push(new ValidationError(`'replace' has same keys as 'transform': ${arrayBasicIntersect(n,o)}.`)),c.length)throw new t(c,["Configuration has errors.",...c.map((e,t)=>`${t+1}). ${e.message}`)].join("\n"));return{...e}}config(e={}){if(isFunction(e)&&(e=convertFunctionToConfig(e)),!checkIsObjectLike(e))throw new TypeError("Config should be an object");const t=arrayGetDifference(objectGetKeys(e),i);if(t.length)throw new TypeError(`Config has unknown fields: '${t.join("', '")}'.`);return Vicis.testConfig(e),this.resetConfig(),this.sort(e.sort),this.omit(e.omit),this.cast(e.cast),this.defined(e.defined),this.pick(e.pick),this.rename(e.rename),this.replace(e.replace),this.required(e.required),this.transform(e.transform),this.defaults(e.defaults),this.exclude(e.exclude),this.order(e.order),_classPrivateFieldGet(this,T).call(this),_classPrivateFieldGet(this,D).call(this),this}cast(e={}){return _classPrivateFieldSet(this,b,castConfig(e)),_classPrivateFieldGet(this,T).call(this),_classPrivateFieldGet(this,D).call(this),this}defaults(e={}){return _classPrivateFieldSet(this,g,defaultsConfig(e)),_classPrivateFieldGet(this,T).call(this),_classPrivateFieldGet(this,D).call(this),this}defined(e=[]){return _classPrivateFieldSet(this,F,definedConfig(e)),_classPrivateFieldGet(this,T).call(this),_classPrivateFieldGet(this,D).call(this),this}exclude(e=[]){return _classPrivateFieldSet(this,w,excludeConfig(e)),_classPrivateFieldGet(this,T).call(this),_classPrivateFieldGet(this,D).call(this),this}omit(e=[]){return _classPrivateFieldSet(this,P,omitConfig(e)),_classPrivateFieldGet(this,T).call(this),_classPrivateFieldGet(this,D).call(this),this}order(e=[]){return _classPrivateFieldSet(this,j,orderConfig(e)),_classPrivateFieldGet(this,T).call(this),_classPrivateFieldGet(this,D).call(this),this}pick(e=[]){return _classPrivateFieldSet(this,_,pickConfig(e)),_classPrivateFieldGet(this,T).call(this),_classPrivateFieldGet(this,D).call(this),this}rename(e={}){return _classPrivateFieldSet(this,E,renameConfig(e)),_classPrivateFieldGet(this,T).call(this),_classPrivateFieldGet(this,D).call(this),this}replace(e={}){return _classPrivateFieldSet(this,G,replaceConfig(e)),_classPrivateFieldGet(this,T).call(this),_classPrivateFieldGet(this,D).call(this),this}required(e=[]){return _classPrivateFieldSet(this,k,requiredConfig(e)),_classPrivateFieldGet(this,T).call(this),_classPrivateFieldGet(this,D).call(this),this}sort(e=!1){if("boolean"!=typeof e)throw new TypeError("'sort' should be a boolean");return _classPrivateFieldSet(this,S,e),_classPrivateFieldGet(this,D).call(this),this}transform(e={}){return _classPrivateFieldSet(this,O,transformConfig(e)),_classPrivateFieldGet(this,T).call(this),_classPrivateFieldGet(this,D).call(this),this}getData(){return clone$1(_classPrivateFieldGet(this,I))}data(e){if(!checkIsObjectLike(e))throw new TypeError("Data should be an object");return _classPrivateFieldSet(this,C,e),_classPrivateFieldGet(this,D).call(this),this}clear(){return _classPrivateFieldSet(this,I,{}),_classPrivateFieldSet(this,C,void 0),this}toJSON(){return this.getData()}toString(){return jsonStringify(this.toJSON())}fromArray(e){return Array.from(e).map(e=>this.data(e).toJSON())}}var b=new WeakMap,g=new WeakMap,F=new WeakMap,w=new WeakMap,P=new WeakMap,j=new WeakMap,_=new WeakMap,S=new WeakMap,E=new WeakMap,G=new WeakMap,k=new WeakMap,O=new WeakMap,I=new WeakMap,C=new WeakMap,T=new WeakMap,D=new WeakMap;e.TYPES_ENUM=r,e.Vicis=Vicis,e.cast=function cast(e,t={}){const r=castConfig(t);return objectIsEmpty(r)?e:castData(r,e)},e.defaults=function defaults(e,t={}){return objectIsEmpty(defaultsConfig(t))?e:defaultsData(t,e)},e.defined=function defined(e,t=[]){return arrayIsEmpty(t)?e:definedData(t,e)},e.exclude=function exclude(e,t=[]){const r=excludeConfig(t);if(arrayIsEmpty(r))return e;const i=r.filter(isString);if(i.length&&Object.keys(e).forEach(t=>{i.includes(t)&&delete e[t]}),0===objectGetKeys(e).length)return e;const a=r.filter(isRegExp);return a.length&&a.forEach(t=>{Object.keys(e).forEach(r=>{t.test(r)&&delete e[r]})}),e},e.omit=function omit(e,t=[]){const r=omitConfig(t);if(arrayIsEmpty(r))return e;const i={};return Object.keys(e).forEach(t=>{r.includes(t)||(i[t]=e[t])}),i},e.order=function order(e,t=[],r=!1){return arrayIsEmpty(orderConfig(t))?e:objectKeysOrder(e,t,r)},e.pick=function pick(e,t=[]){const r=pickConfig(t);return arrayIsEmpty(r)?e:pickData(r,e)},e.rename=function rename(e,t={}){const r=renameConfig(t);return objectIsEmpty(r)?e:renameData(r,e)},e.replace=function replace(e,t={}){const r=replaceConfig(t);return objectIsEmpty(r)?e:replaceData(r,e)},e.required=function required(e,t=[]){const r=requiredConfig(t);return arrayIsEmpty(r)?e:requiredData(r,e)},e.transform=function transform(e,t={}){const r=transformConfig(t);return objectIsEmpty(r)?e:transformData(r,e)},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=vicis.js.map
