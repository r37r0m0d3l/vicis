!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).vicis={})}(this,(function(t){"use strict";var e;!function(t){t.BOOLEAN="boolean",t.FLAG="flag",t.INTEGER="integer",t.JSON="json",t.NUMERIC="numeric",t.STRING="string"}(e||(e={}));const r={BOOLEAN:e.BOOLEAN,FLAG:e.FLAG,INTEGER:e.INTEGER,JSON:e.JSON,NUMERIC:e.NUMERIC,STRING:e.STRING};function objectIsEmpty(t){return 0===Object.keys(t).length}function checkIsObjectLike(t){return t&&"object"==typeof t&&!Array.isArray(t)}function isString(t){return"string"==typeof t}function jsonStringify(t){return JSON.stringify(t)}function castConfig(t){if(!checkIsObjectLike(t))throw new TypeError("Cast should be an object");return objectIsEmpty(t)?{}:(Object.keys(t).forEach(r=>{if(!isString(t[r]))throw new TypeError(`'Cast' expect object values to be strings. Not a string at key: '${jsonStringify(t[r])}'.`);if(!Object.values(e).includes(t[r]))throw new TypeError(`'Cast' has unknown type in {${r}: "${t[r]}"}.`)}),t)}function castToString(t){if(null==t)return"";if("string"==typeof t)return t;const e=t.toString();return"0"===e&&Object.is(t,-0)?"-0":e}function jsonParse(t){return JSON.parse(t)}function isFunction(t){return"[object Function]"===Object.prototype.toString.call(t)&&!/^class\s/.test(Function.prototype.toString.call(t))}function objectToPlain(t){return function objectDeserialize(t){return isString(t)?jsonParse(t):t}(function objectSerialize(t){let e;const{toJSON:r,toObject:n}=t;return e=isFunction(n)?t.toObject():isFunction(r)?t.toJSON():t,isString(e)?e:jsonStringify(e)}(t))}function castData(t,r){return objectIsEmpty(t)||Object.keys(t).forEach(n=>{const i=t[n];if(!(n in r))throw new Error(`Field '${n}' suppose to be converted to ${i}.`);switch(i){case e.BOOLEAN:r[n]=Boolean(r[n]);break;case e.FLAG:r[n]=function convertToFlag(t,e=!1,r=!1){if(null==t)return e;if("boolean"==typeof t)return t;const n=t.toString().toLocaleLowerCase().trim();return 0===n.length?e:"true"===n||"1"===n||"false"!==n&&"0"!==n&&r}(r[n]);break;case e.NUMERIC:{const t=Number(r[n]);if(Number.isFinite(t))r[n]=t;else{const t=Number.parseFloat(castToString(r[n]).trim());Number.isFinite(t)?r[n]=t:r[n]=0}break}case e.INTEGER:{const t=Number(r[n]);if(Number.isFinite(t))r[n]=Math.trunc(t);else{const e=Number.parseFloat(castToString(r[n]).trim());Number.isFinite(e)?r[n]=Math.trunc(t):r[n]=0}break}case e.STRING:r[n]=castToString(r[n]);break;case e.JSON:r[n]=objectToPlain(r[n]);break;default:throw new Error("Unknown value convert error")}}),r}function defaultsConfig(t){if(!checkIsObjectLike(t))throw new TypeError("'Defaults' should be an object");return t}function defaultsData(t,e){return objectIsEmpty(t)||Object.keys(t).forEach(r=>{r in e&&void 0!==e[r]||(e[r]=t[r])}),e}function arrayIsEmpty(t){return 0===t.length}function arrayGetUnique(t,e=!0){if(t.length<2)return t;let r=[...new Set(t)];if(r.includes(0)){const e=t.filter(t=>0===t);e.length>1&&e.some(t=>1/t===Number.NEGATIVE_INFINITY)&&r.push(-0)}if(r.filter(t=>"string"==typeof t).length){const e=t.filter(t=>"string"==typeof t);if(e.length>1){const t=[...new Set(e.map(t=>t.normalize()))];t.forEach(t=>{delete r[r.indexOf(t)]});const n=[];for(let t=0;t<r.length;t++)t in r&&n.push(r[t]);r=n.concat(t)}}return e?r.sort():r}function definedConfig(t){if(!Array.isArray(t))throw new TypeError("'Defined' should be an array");return arrayIsEmpty(t)?[]:arrayGetUnique(t).map(t=>{if(!isString(t))throw new TypeError(`'Defined' expect array of strings. Value: '${jsonStringify(t)}'.`);return t})}function definedData(t,e){const r=definedConfig(t);return arrayIsEmpty(r)||r.forEach(t=>{if(!(t in e))throw new Error(`Field '${t}' must be defined.`);if(void 0===e[t])throw new Error(`Field '${t}' should have value.`)}),e}function isRegExp(t){return t instanceof RegExp}function objectGetKeys(t){return Object.keys(t).sort((t,e)=>t.localeCompare(e))}function excludeConfig(t){if(!Array.isArray(t))throw new TypeError("'Exclude' should be an array");return arrayIsEmpty(t)?[]:arrayGetUnique(t).map(t=>{if(!isString(t)&&!isRegExp(t))throw new TypeError(`'Exclude' expect array of strings or regular expressions. Value: '${jsonStringify(t)}'.`);return t})}function omitConfig(t){if(!Array.isArray(t))throw new TypeError("'Omit' should be an array");return arrayIsEmpty(t)?[]:arrayGetUnique(t).map(t=>{if(!isString(t))throw new TypeError(`'Omit' expect array of strings. Value: '${jsonStringify(t)}'.`);return t})}var n;function objectKeysOrder(t,e=[],r=!1){if(!Array.isArray(e)||0===e.length)return t;const n=e.filter(t=>"string"==typeof t);let i=new Set(Object.keys(t));const a={};return n.forEach(e=>{i.delete(e),e in t&&(a[e]=t[e])}),i=[...i],r&&(i=i.sort((t,e)=>t.localeCompare(e))),i.forEach(e=>a[e]=t[e]),a}function orderConfig(t){if(!Array.isArray(t))throw new TypeError("'Order' should be an array");return arrayIsEmpty(t)?[]:arrayGetUnique(t,!1).map(t=>{if(!isString(t))throw new TypeError(`'Order' expect array of strings. Value: '${jsonStringify(t)}'.`);return t})}function sortAsBoolean(t=n.Default){return"boolean"==typeof t?t:n.Yes===t}function pickConfig(t){if(!Array.isArray(t))throw new TypeError("'Pick' should be an array");return arrayIsEmpty(t)?[]:arrayGetUnique(t).map(t=>{if(!isString(t))throw new TypeError(`'Pick' expect array of strings. Value: '${jsonStringify(t)}'.`);return t})}function pickData(t,e){if(arrayIsEmpty(t))return e;const r={};return Object.keys(e).forEach(n=>{t.includes(n)&&(r[n]=e[n])}),r}function renameConfig(t){if(!checkIsObjectLike(t))throw new TypeError("'Rename' should be an object");if(objectIsEmpty(t))return{};Object.keys(t).forEach(t=>{if(!isString(t))throw new TypeError(`'Rename' expect object values to be strings. Not a string at key: '${t}'.`)});const e=Object.values(t),r=arrayGetUnique(e);if(e.length!==r.length)throw new TypeError(`'Rename' has similar values: '${jsonStringify(r)}'.`);return t}function clone(t){switch(typeOf(t)){case"arraybuffer":return function cloneArrayBuffer(t){const e=new t.constructor(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}(t);case"array":return t.slice();case"object":return Object.assign({},t);case"date":return new t.constructor(Number(t));case"map":return new Map(t);case"set":return new Set(t);case"buffer":return function cloneBuffer(t){const e=t.length;let r;r=Buffer.allocUnsafe?Buffer.allocUnsafe(e):Buffer.from(e);return t.copy(r),r}(t);case"symbol":return function cloneSymbol(t){if(Symbol.prototype.valueOf)return Object(Symbol.prototype.valueOf.call(t));return{}}(t);case"float32array":case"float64array":case"int16array":case"int32array":case"int8array":case"uint16array":case"uint32array":case"uint8clampedarray":case"uint8array":return function cloneTypedArray(t){return new t.constructor(t.buffer,t.byteOffset,t.length)}(t);case"regexp":return function cloneRegExp(t){let e;e=void 0!==t.flags?t.flags:/\w+$/.exec(t)||void 0;const r=new t.constructor(t.source,e);return r.lastIndex=t.lastIndex,r}(t);case"error":return Object.create(t);default:return t}}function typeOf(t){if(void 0===t)return"undefined";if(null===t)return"null";if(!0===t||!1===t||t instanceof Boolean)return"boolean";if("string"==typeof t||t instanceof String)return"string";if("number"==typeof t||t instanceof Number)return"number";if("function"==typeof t||t instanceof Function)return"function";if(void 0!==Array.isArray&&Array.isArray(t))return"array";if(t instanceof RegExp)return"regexp";if(t instanceof Date)return"date";const e=Object.prototype.toString.call(t);return"[object RegExp]"===e?"regexp":"[object Date]"===e?"date":"[object Arguments]"===e?"arguments":"[object Error]"===e?"error":function isBuffer(t){return null!==t&&Boolean(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}(t)?"buffer":"[object Set]"===e?"set":"[object WeakSet]"===e?"weakset":"[object Map]"===e?"map":"[object WeakMap]"===e?"weakmap":"[object Symbol]"===e?"symbol":"[object Int8Array]"===e?"int8array":"[object Uint8Array]"===e?"uint8array":"[object Uint8ClampedArray]"===e?"uint8clampedarray":"[object Int16Array]"===e?"int16array":"[object Uint16Array]"===e?"uint16array":"[object Int32Array]"===e?"int32array":"[object Uint32Array]"===e?"uint32array":"[object Float32Array]"===e?"float32array":"[object Float64Array]"===e?"float64array":"[object ArrayBuffer]"===e?"arraybuffer":"object"}function isObjectObject(t){return function isObject(t){return"object"==typeof t&&null!==t}(t)&&"[object Object]"===Object.prototype.toString.call(t)}function cloneObjectDeep(t,e){if("function"==typeof e)return e(t);if(e||function isPlainObject(t){if(!isObjectObject(t))return!1;const e=t.constructor;if("function"!=typeof e)return!1;const r=e.prototype;return!!isObjectObject(r)&&r.hasOwnProperty("isPrototypeOf")}(t)){const r=new t.constructor;for(const n in t)r[n]=cloneDeep(t[n],e);return r}return t}function cloneDeep(t,e){switch(typeOf(t)){case"object":return cloneObjectDeep(t,e);case"array":return function cloneArrayDeep(t,e){const r=new t.constructor(t.length);for(let n=0;n<t.length;n++)r[n]=cloneDeep(t[n],e);return r}(t,e);default:return clone(t)}}function renameData(t,e){if(objectIsEmpty(t))return e;const r=Object.keys(t).sort((t,e)=>t.localeCompare(e)),n={},i=cloneDeep(e);return r.forEach(e=>{if(!(e in i))throw new Error(`Field '${e}' suppose to be renamed.`);n[t[e]]=i[e]}),r.forEach(t=>{delete i[t]}),Object.assign(i,n),i}function replaceConfig(t){if(!checkIsObjectLike(t))throw new TypeError("'Replace' should be an object");return t}function replaceData(t,e){return objectIsEmpty(t)||Object.keys(t).forEach(r=>{e[r]=t[r]}),e}function requiredConfig(t=[]){if(!Array.isArray(t))throw new TypeError("'Required' should be an array");return arrayIsEmpty(t)?[]:arrayGetUnique(t).map(t=>{if(!isString(t))throw new TypeError(`'Required' expect array of strings. Value: '${jsonStringify(t)}'.`);return t})}function requiredData(t,e){return arrayIsEmpty(t)||t.forEach(t=>{if(!(t in e))throw new Error(`Field '${t}' is required.`)}),e}function transformConfig(t){if(!checkIsObjectLike(t))throw new TypeError("'Transform' should be an object");return objectIsEmpty(t)?{}:(Object.keys(t).forEach(e=>{if(!function checkIsCallable(t){return!!t&&(!!isFunction(t)||!!("toFunction"in t&&isFunction(t.toFunction)&&isFunction(t.toFunction())))}(t[e]))throw new TypeError(`'Transform' expect object values to be functions. Not a function at key: '${e}'.`)}),t)}function clone$1(t){return function checkIsPrimitive(t){return Object(t)!==t}(t)?t:cloneDeep(t)}function transformData(t,e){return objectIsEmpty(t)||Object.keys(t).forEach(r=>{if(!(r in e))throw new Error(`Field '${r}' suppose to be transformed.`);isFunction(t[r])?e[r]=t[r](e[r],r,clone$1(e)):e[r]=t[r].toFunction()(e[r],r,clone$1(e))}),e}!function(t){t.Default="asc",t.No="no",t.Yes="asc"}(n||(n={}));const i=["cast","defaults","defined","exclude","omit","order","pick","sort","rename","replace","required","transform"];class AggregateError extends Error{constructor(t,e=""){super(e),this.name="AggregateError",this.errors=[],this.errors=t,this.message=e}}class ValidationError extends Error{constructor(t){super(t),this.name="ValidationError"}}function arrayBasicIntersect(t,e){if(!t.length||!e.length)return[];const r=new Set(e);return[...new Set(t)].filter(t=>r.has(t))}function arrayGetDifference(t,e){const r=new Set(e);return t.filter(t=>!r.has(t))}function arrayHasSame(t,e){if(!t.length||!e.length)return!1;const r=new Set(e);return Boolean([...new Set(t)].filter(t=>r.has(t)).length)}function castToJson(t,e=n.Default){return sortAsBoolean(e)?function objectKeysSort(t,e=!0){if(!t||"object"!=typeof t||Array.isArray(t))return t;const r=Object.keys(t);return r.length?r.reduce((r,n)=>(e&&t[n]&&"object"==typeof t[n]&&!Array.isArray(t[n])?r[n]=objectKeysSort(t[n],e):r[n]=t[n],r),Object.create(Object.getPrototypeOf(t))):t}(jsonParse(jsonStringify(t)),!0):jsonParse(jsonStringify(t))}function objectGetProperty(t,e,r){return e in t?t[e]:r}function objectCreateEmpty(){return new Object(null)}var a,s,o,c,u,f,h,l,__classPrivateFieldSet=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r},__classPrivateFieldGet=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class VicisParameter{constructor(){a.set(this,void 0),s.set(this,void 0),o.set(this,void 0),c.set(this,!1),u.set(this,!1),f.set(this,void 0),h.set(this,void 0),l.set(this,void 0)}get boolean(){return __classPrivateFieldSet(this,a,e.BOOLEAN),this}get flag(){return __classPrivateFieldSet(this,a,e.FLAG),this}get integer(){return __classPrivateFieldSet(this,a,e.INTEGER),this}get numeric(){return __classPrivateFieldSet(this,a,e.NUMERIC),this}get string(){return __classPrivateFieldSet(this,a,e.STRING),this}get json(){return __classPrivateFieldSet(this,a,e.JSON),this}get defined(){return __classPrivateFieldSet(this,o,!0),this}get required(){return __classPrivateFieldSet(this,f,!0),this}replace(t){return __classPrivateFieldSet(this,l,t),__classPrivateFieldSet(this,u,!0),this}defaults(t){return __classPrivateFieldSet(this,s,t),__classPrivateFieldSet(this,c,!0),this}transform(t){return __classPrivateFieldSet(this,h,t),this}toObject(){return{cast:__classPrivateFieldGet(this,a),defaults:__classPrivateFieldGet(this,s),defined:__classPrivateFieldGet(this,o),hasDefaults:__classPrivateFieldGet(this,c),hasValue:__classPrivateFieldGet(this,u),required:__classPrivateFieldGet(this,f),transform:__classPrivateFieldGet(this,h),value:__classPrivateFieldGet(this,l)}}}function convertFunctionToConfig(t){if(!isFunction(t))throw new TypeError("Callable must be a function");const e=t(new Proxy(new Object(null),{get:function(t,e){return e in t||(t[e]=new VicisParameter),t[e]}})),r=function createConfig(){return{cast:objectCreateEmpty(),defaults:objectCreateEmpty(),defined:[],exclude:[],omit:[],order:[],pick:[],sort:n.Default,rename:objectCreateEmpty(),replace:objectCreateEmpty(),required:[],transform:objectCreateEmpty()}}();return Object.keys(e).forEach(t=>{const n=t;r.pick.push(n);const i={};if(e[n]instanceof VicisParameter)i[n]=e[n].toObject();else{const t=new VicisParameter;t.replace(e[n]),i[n]=t.toObject()}delete e[n],i[n].cast&&(r.cast[n]=i[n].cast),i[n].defined&&r.defined.push(n),i[n].required&&r.required.push(n),i[n].transform&&(r.transform[n]=i[n].transform),i[n].hasDefaults&&(r.defaults[n]=i[n].defaults),i[n].hasValue&&(r.replace[n]=i[n].value)}),Object.keys(r.cast).length||delete r.cast,Object.keys(r.defaults).length||delete r.defaults,r.defined.length||delete r.defined,r.pick.length||delete r.pick,r.required.length||delete r.required,Object.keys(r.replace).length||delete r.replace,Object.keys(r.transform).length||delete r.transform,r}a=new WeakMap,s=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap,l=new WeakMap;var y,d,p,m,b,g,j,E,w,k,O,S,I,C,__classPrivateFieldSet$1=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r},__classPrivateFieldGet$1=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class Vicis{constructor(t={},e){y.set(this,void 0),d.set(this,void 0),p.set(this,void 0),m.set(this,void 0),b.set(this,void 0),g.set(this,void 0),j.set(this,void 0),E.set(this,void 0),w.set(this,void 0),k.set(this,void 0),O.set(this,void 0),S.set(this,void 0),I.set(this,void 0),C.set(this,void 0),__classPrivateFieldSet$1(this,y,objectCreateEmpty()),__classPrivateFieldSet$1(this,d,objectCreateEmpty()),__classPrivateFieldSet$1(this,p,[]),__classPrivateFieldSet$1(this,m,[]),__classPrivateFieldSet$1(this,b,[]),__classPrivateFieldSet$1(this,g,[]),__classPrivateFieldSet$1(this,j,[]),__classPrivateFieldSet$1(this,w,objectCreateEmpty()),__classPrivateFieldSet$1(this,k,objectCreateEmpty()),__classPrivateFieldSet$1(this,O,[]),__classPrivateFieldSet$1(this,E,n.Default),__classPrivateFieldSet$1(this,S,objectCreateEmpty()),__classPrivateFieldSet$1(this,I,objectCreateEmpty()),__classPrivateFieldSet$1(this,C,void 0),this.config(t),void 0!==e&&this.data(e)}validateConfig(){const t=objectGetKeys(__classPrivateFieldGet$1(this,y)),e=objectGetKeys(__classPrivateFieldGet$1(this,w)),r=objectGetKeys(__classPrivateFieldGet$1(this,k)),n=objectGetKeys(__classPrivateFieldGet$1(this,S));if(arrayHasSame(__classPrivateFieldGet$1(this,b),t))throw new ValidationError(`'omit' has same keys as 'cast': ${arrayBasicIntersect(__classPrivateFieldGet$1(this,b),t)}.`);if(arrayHasSame(__classPrivateFieldGet$1(this,b),__classPrivateFieldGet$1(this,p)))throw new ValidationError(`'omit' has same keys as 'defined': ${arrayBasicIntersect(__classPrivateFieldGet$1(this,b),__classPrivateFieldGet$1(this,p))}.`);if(arrayHasSame(__classPrivateFieldGet$1(this,b),__classPrivateFieldGet$1(this,j)))throw new ValidationError(`'omit' has same keys as 'pick': ${arrayBasicIntersect(__classPrivateFieldGet$1(this,b),__classPrivateFieldGet$1(this,j))}.`);if(arrayHasSame(__classPrivateFieldGet$1(this,b),e))throw new ValidationError(`'omit' has same keys as 'rename': ${arrayBasicIntersect(__classPrivateFieldGet$1(this,b),e)}.`);if(arrayHasSame(__classPrivateFieldGet$1(this,b),r))throw new ValidationError(`'omit' has same keys as 'replace': ${arrayBasicIntersect(__classPrivateFieldGet$1(this,b),r)}.`);if(arrayHasSame(__classPrivateFieldGet$1(this,b),__classPrivateFieldGet$1(this,O)))throw new ValidationError(`'omit' has same keys as 'required': ${arrayBasicIntersect(__classPrivateFieldGet$1(this,b),__classPrivateFieldGet$1(this,O))}.`);if(arrayHasSame(__classPrivateFieldGet$1(this,b),n))throw new ValidationError(`'omit' has same keys as 'transform': ${arrayBasicIntersect(__classPrivateFieldGet$1(this,b),n)}.`);if(arrayHasSame(t,r))throw new ValidationError(`'cast' has same keys as 'replace': ${arrayBasicIntersect(t,r)}.`);if(arrayHasSame(t,n))throw new ValidationError(`'cast' has same keys as 'transform': ${arrayBasicIntersect(t,n)}.`);if(arrayHasSame(r,n))throw new ValidationError(`'replace' has same keys as 'transform': ${arrayBasicIntersect(r,n)}.`);return this}validateData(){return void 0===__classPrivateFieldGet$1(this,C)||("toObject"in __classPrivateFieldGet$1(this,C)&&isFunction(__classPrivateFieldGet$1(this,C).toObject)?__classPrivateFieldSet$1(this,I,__classPrivateFieldGet$1(this,C).toObject()):"toJSON"in __classPrivateFieldGet$1(this,C)&&isFunction(__classPrivateFieldGet$1(this,C).toJSON)?__classPrivateFieldSet$1(this,I,__classPrivateFieldGet$1(this,C).toJSON()):__classPrivateFieldSet$1(this,I,__classPrivateFieldGet$1(this,C)),__classPrivateFieldSet$1(this,I,function omitData(t,e){if(arrayIsEmpty(t))return e;const r={};return Object.keys(e).forEach(n=>{t.includes(n)||(r[n]=e[n])}),r}(__classPrivateFieldGet$1(this,b),__classPrivateFieldGet$1(this,I))),__classPrivateFieldSet$1(this,I,requiredData(__classPrivateFieldGet$1(this,O),__classPrivateFieldGet$1(this,I))),__classPrivateFieldSet$1(this,I,definedData(__classPrivateFieldGet$1(this,p),__classPrivateFieldGet$1(this,I))),__classPrivateFieldSet$1(this,I,castData(__classPrivateFieldGet$1(this,y),__classPrivateFieldGet$1(this,I))),__classPrivateFieldSet$1(this,I,transformData(__classPrivateFieldGet$1(this,S),__classPrivateFieldGet$1(this,I))),__classPrivateFieldSet$1(this,I,replaceData(__classPrivateFieldGet$1(this,k),__classPrivateFieldGet$1(this,I))),__classPrivateFieldSet$1(this,I,renameData(__classPrivateFieldGet$1(this,w),__classPrivateFieldGet$1(this,I))),__classPrivateFieldSet$1(this,I,defaultsData(__classPrivateFieldGet$1(this,d),__classPrivateFieldGet$1(this,I))),__classPrivateFieldSet$1(this,I,pickData(__classPrivateFieldGet$1(this,j),__classPrivateFieldGet$1(this,I))),__classPrivateFieldSet$1(this,I,function excludeData(t,e){if(arrayIsEmpty(t))return e;const r=t.filter(isString);if(r.length&&Object.keys(e).forEach(t=>{r.includes(t)&&delete e[t]}),0===objectGetKeys(e).length)return e;const n=t.filter(isRegExp);return n.length&&n.forEach(t=>{Object.keys(e).forEach(r=>{t.test(r)&&delete e[r]})}),e}(__classPrivateFieldGet$1(this,m),__classPrivateFieldGet$1(this,I))),__classPrivateFieldSet$1(this,I,castToJson(__classPrivateFieldGet$1(this,I),__classPrivateFieldGet$1(this,E))),__classPrivateFieldSet$1(this,I,function orderData(t,e,r=n.Default){return arrayIsEmpty(t)?e:objectKeysOrder(e,t,sortAsBoolean(r))}(__classPrivateFieldGet$1(this,g),__classPrivateFieldGet$1(this,I),__classPrivateFieldGet$1(this,E)))),this}static factory(t,e){return new Vicis(t,e)}static from(t,e){return Vicis.factory(e,t).getData()}static fromArray(t,e){const r=Vicis.factory(e);return Array.from(t).map(t=>r.data(t).getData())}static get BOOLEAN(){return e.BOOLEAN}static get FLAG(){return e.FLAG}static get NUMERIC(){return e.NUMERIC}static get INTEGER(){return e.INTEGER}static get STRING(){return e.STRING}static get JSON(){return e.JSON}getConfig(){return clone$1({cast:__classPrivateFieldGet$1(this,y),defaults:__classPrivateFieldGet$1(this,d),defined:__classPrivateFieldGet$1(this,p),exclude:__classPrivateFieldGet$1(this,m),omit:__classPrivateFieldGet$1(this,b),order:__classPrivateFieldGet$1(this,g),pick:__classPrivateFieldGet$1(this,j),sort:__classPrivateFieldGet$1(this,E),rename:__classPrivateFieldGet$1(this,w),replace:__classPrivateFieldGet$1(this,k),required:__classPrivateFieldGet$1(this,O),transform:__classPrivateFieldGet$1(this,S)})}resetConfig(){return __classPrivateFieldSet$1(this,y,{}),__classPrivateFieldSet$1(this,d,{}),__classPrivateFieldSet$1(this,p,[]),__classPrivateFieldSet$1(this,m,[]),__classPrivateFieldSet$1(this,b,[]),__classPrivateFieldSet$1(this,g,[]),__classPrivateFieldSet$1(this,j,[]),__classPrivateFieldSet$1(this,E,n.Default),__classPrivateFieldSet$1(this,w,{}),__classPrivateFieldSet$1(this,k,{}),__classPrivateFieldSet$1(this,O,[]),__classPrivateFieldSet$1(this,S,{}),this}static testConfig(t){let e;if(e=isFunction(t)?convertFunctionToConfig(t):t,!checkIsObjectLike(e))throw new AggregateError([new TypeError("Config should be an object")],"Configuration has errors");const r=arrayGetDifference(objectGetKeys(e),i);if(r.length)throw new AggregateError([new TypeError(`Config has unknown fields: '${r.join("', '")}'.`)],"Configuration has errors");const n=objectGetKeys(objectGetProperty(e,"cast",{})),a=objectGetKeys(objectGetProperty(e,"rename",{})),s=objectGetKeys(objectGetProperty(e,"replace",{})),o=objectGetKeys(objectGetProperty(e,"transform",{})),c=[];if("omit"in e&&arrayHasSame(e.omit,n)&&c.push(new ValidationError(`'omit' has same keys as 'cast': ${arrayBasicIntersect(e.omit,n)}.`)),"omit"in e&&"defined"in e&&arrayHasSame(e.omit,e.defined)&&c.push(new ValidationError(`'omit' has same keys as 'defined': ${arrayBasicIntersect(e.omit,e.defined)}.`)),"omit"in e&&"pick"in e&&arrayHasSame(e.omit,e.pick)&&c.push(new ValidationError(`'omit' has same keys as 'pick': ${arrayBasicIntersect(e.omit,e.pick)}.`)),"omit"in e&&arrayHasSame(e.omit,a)&&c.push(new ValidationError(`'omit' has same keys as 'rename': ${arrayBasicIntersect(e.omit,a)}.`)),"omit"in e&&arrayHasSame(e.omit,s)&&c.push(new ValidationError(`'omit' has same keys as 'replace': ${arrayBasicIntersect(e.omit,s)}.`)),"omit"in e&&"required"in e&&arrayHasSame(e.omit,e.required)&&c.push(new ValidationError(`'omit' has same keys as 'required': ${arrayBasicIntersect(e.omit,e.required)}.`)),"omit"in e&&arrayHasSame(e.omit,o)&&c.push(new ValidationError(`'omit' has same keys as 'transform': ${arrayBasicIntersect(e.omit,o)}.`)),arrayHasSame(n,s)&&c.push(new ValidationError(`'cast' has same keys as 'replace': ${arrayBasicIntersect(n,s)}.`)),arrayHasSame(n,o)&&c.push(new ValidationError(`'cast' has same keys as 'transform': ${arrayBasicIntersect(n,o)}.`)),arrayHasSame(s,o)&&c.push(new ValidationError(`'replace' has same keys as 'transform': ${arrayBasicIntersect(s,o)}.`)),c.length)throw new AggregateError(c,["Configuration has errors.",...c.map((t,e)=>`${e+1}). ${t.message}`)].join("\n"));return{...e}}config(t={}){let e;if(e=isFunction(t)?convertFunctionToConfig(t):t,!checkIsObjectLike(e))throw new TypeError("Config should be an object");const r=arrayGetDifference(objectGetKeys(e),i);if(r.length)throw new TypeError(`Config has unknown fields: '${r.join("', '")}'.`);return Vicis.testConfig(e),this.resetConfig(),this.sort(e.sort),this.omit(e.omit),this.cast(e.cast),this.defined(e.defined),this.pick(e.pick),this.rename(e.rename),this.replace(e.replace),this.required(e.required),this.transform(e.transform),this.defaults(e.defaults),this.exclude(e.exclude),this.order(e.order),this.validateConfig(),this.validateData(),this}cast(t={}){return __classPrivateFieldSet$1(this,y,castConfig(t)),this.validateConfig(),this.validateData(),this}defaults(t={}){return __classPrivateFieldSet$1(this,d,defaultsConfig(t)),this.validateConfig(),this.validateData(),this}defined(t=[]){return __classPrivateFieldSet$1(this,p,definedConfig(t)),this.validateConfig(),this.validateData(),this}exclude(t=[]){return __classPrivateFieldSet$1(this,m,excludeConfig(t)),this.validateConfig(),this.validateData(),this}omit(t=[]){return __classPrivateFieldSet$1(this,b,omitConfig(t)),this.validateConfig(),this.validateData(),this}order(t=[]){return __classPrivateFieldSet$1(this,g,orderConfig(t)),this.validateConfig(),this.validateData(),this}pick(t=[]){return __classPrivateFieldSet$1(this,j,pickConfig(t)),this.validateConfig(),this.validateData(),this}rename(t={}){return __classPrivateFieldSet$1(this,w,renameConfig(t)),this.validateConfig(),this.validateData(),this}replace(t={}){return __classPrivateFieldSet$1(this,k,replaceConfig(t)),this.validateConfig(),this.validateData(),this}required(t=[]){return __classPrivateFieldSet$1(this,O,requiredConfig(t)),this.validateConfig(),this.validateData(),this}sort(t=n.Default){if("boolean"!=typeof t&&!Object.values(n).includes(t))throw new TypeError("'sort' should be a boolean");return sortAsBoolean(t)?__classPrivateFieldSet$1(this,E,n.Yes):__classPrivateFieldSet$1(this,E,n.No),this.validateData(),this}transform(t={}){return __classPrivateFieldSet$1(this,S,transformConfig(t)),this.validateConfig(),this.validateData(),this}getData(){return clone$1(__classPrivateFieldGet$1(this,I))}data(t){if(!checkIsObjectLike(t))throw new TypeError("Data should be an object");return __classPrivateFieldSet$1(this,C,t),this.validateData(),this}clear(){return __classPrivateFieldSet$1(this,I,objectCreateEmpty()),__classPrivateFieldSet$1(this,C,void 0),this}toJSON(){return this.getData()}toString(){return jsonStringify(this.toJSON())}fromArray(t){return Array.from(t).map(t=>this.data(t).toJSON())}}y=new WeakMap,d=new WeakMap,p=new WeakMap,m=new WeakMap,b=new WeakMap,g=new WeakMap,j=new WeakMap,E=new WeakMap,w=new WeakMap,k=new WeakMap,O=new WeakMap,S=new WeakMap,I=new WeakMap,C=new WeakMap,t.CAST_TYPE=r,t.Vicis=Vicis,t.cast=function cast(t,e){const r=castConfig(e);return objectIsEmpty(r)?t:castData(r,t)},t.defaults=function defaults(t,e={}){return objectIsEmpty(defaultsConfig(e))?t:defaultsData(e,t)},t.defined=function defined(t,e=[]){return arrayIsEmpty(e)?t:definedData(e,t)},t.exclude=function exclude(t,e=[]){const r=excludeConfig(e);if(arrayIsEmpty(r))return t;const n=r.filter(isString);if(n.length&&Object.keys(t).forEach(e=>{n.includes(e)&&delete t[e]}),0===objectGetKeys(t).length)return t;const i=r.filter(isRegExp);return i.length&&i.forEach(e=>{Object.keys(t).forEach(r=>{e.test(r)&&delete t[r]})}),t},t.omit=function omit(t,e=[]){const r=omitConfig(e);if(arrayIsEmpty(r))return t;const n={};return Object.keys(t).forEach(e=>{r.includes(e)||(n[e]=t[e])}),n},t.order=function order(t,e=[],r=n.Default){return arrayIsEmpty(orderConfig(e))?t:objectKeysOrder(t,e,sortAsBoolean(r))},t.pick=function pick(t,e=[]){const r=pickConfig(e);return arrayIsEmpty(r)?t:pickData(r,t)},t.rename=function rename(t,e={}){const r=renameConfig(e);return objectIsEmpty(r)?t:renameData(r,t)},t.replace=function replace(t,e={}){const r=replaceConfig(e);return objectIsEmpty(r)?t:replaceData(r,t)},t.required=function required(t,e=[]){const r=requiredConfig(e);return arrayIsEmpty(r)?t:requiredData(r,t)},t.transform=function transform(t,e={}){const r=transformConfig(e);return objectIsEmpty(r)?t:transformData(r,t)},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=index.js.map
